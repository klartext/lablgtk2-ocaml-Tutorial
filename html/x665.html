
<html><head><title>Memory Management</title><meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.7"/><link rel="HOME" title="GTK+ 2.0 Tutorial using Ocaml" href="book1.html"/><link rel="UP" title="Creating Widgets" href="c655.html"/><link rel="PREVIOUS" title="Creating Widgets" href="c655.html"/><link rel="NEXT" title="The Button Widget" href="c669.html"/></head><body class="SECT1" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="NAVHEADER"><table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0"><tr><th colspan="3" align="center">GTK+ 2.0 Tutorial using Ocaml</th></tr><tr><td width="10%" align="left" valign="bottom"><a href="c655.html" accesskey="P">&#60;&#60;&#60; Previous</a></td><td width="80%" align="center" valign="bottom">Creating Widgets</td><td width="10%" align="right" valign="bottom"><a href="c669.html" accesskey="N">Next &#62;&#62;&#62;</a></td></tr></table><hr align="LEFT" width="100%"/></div><div class="SECT1"><h1 class="SECT1"><a name="SEC-MEMORYMANAGEMENT">Memory Management</a></h1><p>  Important efforts have been dedicated to cooperate with Gtk's
  reference counting mechanism. As a result you should generally be
  able to use Gdk/Gtk data structures without caring about memory
  management. They will be freed when nobody points to them any more.
  This also means that you do not need to pay too much attention to
  whether a data structure is still alive or not. If it is not, you
  should get an error rather than a core dump.
  The case of Gtk objects deserves special care. Since they are
  interactive, we cannot just destroy them when they are no longer
  referenced. They have to be explicitely destroyed. If a widget was
  added to a container widget, it will automatically be destroyed when
  its last container is destroyed. For this reason you need only
  destroy toplevel widgets.</p><p>  IMPORTANT: Some Gtk data structures are allocated in the Caml heap,
  and there use in signals (Gtk functions internally cally callbacks)
  relies on their address being stable during a function call. For
  this reason automatic compaction is disabled in GtkMain. If you need
  it, you may use compaction through Gc.compact where it is safe
  (timeouts, other threads...), but do not enable automatic compaction.</p></div><div class="NAVFOOTER"><hr align="LEFT" width="100%"/><table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0"><tr><td width="33%" align="left" valign="top"><a href="c655.html" accesskey="P">&#60;&#60;&#60; Previous</a></td><td width="34%" align="center" valign="top"><a href="book1.html" accesskey="H">Home</a></td><td width="33%" align="right" valign="top"><a href="c669.html" accesskey="N">Next &#62;&#62;&#62;</a></td></tr><tr><td width="33%" align="left" valign="top">Creating Widgets</td><td width="34%" align="center" valign="top"><a href="c655.html" accesskey="U">Up</a></td><td width="33%" align="right" valign="top">The Button Widget</td></tr></table></div></body></html>
